<form method="POST">
  <leaflet class="map" markers="map.markers" defaults="map.defaults" layers="map.layers" center="map.center" width="100%" height="425"></leaflet>

  <fieldset>
    <div class="form-group" data-ng-repeat="field in template.fields | orderBy:'id'">
      <div data-ng-if="field.data_type === 'boolean'" class="checkbox">
        <label>
          <input data-ng-model="feature[field.name]" type="checkbox" id="{{ field.name }}" name="{{ field.name }}" /> {{ field.label }}
        </label>
      </div>
      <label data-ng-if="field.data_type !== 'boolean'" for="{{ field.name }}" class="control-label"><span data-ng-show="feature[field.name] || field.data_type === 'relationship' || field.data_type === 'date' || field.data_type === 'time' || field.data_type === 'list'">{{ field.label }}</span><span data-ng-show="!feature[field.name].length">&nbsp;</span></label>

      <select data-ng-if="field.data_type === 'list'" class="form-control" data-ng-model="feature[field.name]" id="{{ field.name }}" name="{{ field.name }}" data-ng-options="value for value in field.options">
      </select>
      <select data-ng-if="field.data_type === 'relationship'" class="form-control" data-ng-model="feature[field.relationship]" id="{{ field.relationship }}" name="{{ field.relationship }}" data-ng-options="value.id as value.name for value in field.options">
      </select>

      <input data-ng-model="feature[field.name]" data-ng-if="field.data_type === 'email'" class="form-control" type="email" id="{{ field.name }}" name="{{ field.name }}" placeholder="{{ field.label }}" />
      <input data-ng-model="feature[field.name]" data-ng-if="field.data_type === 'url'" class="form-control" type="url" id="{{ field.name }}" name="{{ field.name }}" placeholder="{{ field.label }}" />
      <input data-ng-model="feature[field.name]" data-ng-if="field.data_type === 'phone'" class="form-control" type="tel" id="{{ field.name }}" name="{{ field.name }}" placeholder="{{ field.label }}" />
      <input data-ng-model="feature[field.name]" data-ng-if="field.data_type === 'date'" class="form-control" class="form-control" type="date" id="{{ field.name }}" name="{{ field.name }}" placeholder="{{ field.label }}" />
      <input data-ng-model="feature[field.name]" data-ng-if="field.data_type === 'time'" class="form-control" type="time" id="{{ field.name }}" name="{{ field.name }}" placeholder="{{ field.label }}" />
      <input data-ng-model="feature[field.name]" data-ng-if="field.data_type === 'whole_number' || field.data_type === 'float'" class="form-control" type="number" id="{{ field.name }}" name="{{ field.name }}" placeholder="{{ field.label }}" />
      <textarea rows="1" data-ng-show="show" data-ng-init="show = true" data-ng-model="feature[field.name]" class="form-control animate"  msd-elastic data-ng-if="field.data_type === 'textarea' || field.data_type === 'text'" id="{{ field.name }}" name="{{ field.name }}" placeholder="{{ field.label }}">{{ feature[field.name] }}</textarea>

      <div data-ng-if="field.data_type === 'file'">

        <div class="drop text-center" data-ng-file-drop="onFileSelect($files, field.relationship)" data-ng-file-drag-over-class="drag-over">
          <span class="glyphicon glyphicon-cloud-upload upload"></span>
          <p class="label-dragdrop">Drag and drop your files here</p>
          <p class="label-or"><em>or</em></p>
          <span class="btn btn-default">Choose files to upload <input type="file" data-ng-file-select="onFileSelect($files, field.relationship)" multiple="multiple" /></span>
        </div>

        <div class="row upload-list" data-ng-repeat="file in files track by $index">
          <div class="col-xs-12 thumbnail text-center">
            <img data-ng-src="{{ file.file.preview }}" />
            <p class="help-block"><small>{{ file.file.name }}</small></p>
            <a class="btn btn-xs btn-danger" data-ng-click="onFileRemove(file.file, $index)">Remove</a>
          </div>
        </div>
      </div>
      <p class="help-block">{{ field.help }}</p>
    </div>
  </fieldset>

  <div class="form-group">
    <input type="submit" id="save" name="save" data-ng-click="save()" class="btn pull-right" value="Create Feature" />
  </div>
</form>